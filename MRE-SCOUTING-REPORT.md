# MRE (Maximum Feasible Refactoring) ä¾¦å¯ŸæŠ¥å‘Š

**ä¾¦å¯Ÿæ—¥æœŸ**: 2026-01-19  
**ä¾¦å¯Ÿå‘˜**: iFlow CLI  
**é¡¹ç›®**: ManimGo - AI é©±åŠ¨çš„æ•°å­¦åŠ¨ç”»ç”Ÿæˆå™¨

---

## ä¸€ã€é¡¹ç›®æ¦‚è§ˆ

### 1.1 ä¸šåŠ¡å®šä½

ManimGo æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ•°å­¦åŠ¨ç”»ç”Ÿæˆå¹³å°ï¼Œç”¨æˆ·è¾“å…¥æ•°å­¦æ¦‚å¿µæˆ– LaTeX å…¬å¼ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ Manim åŠ¨ç”»è§†é¢‘ã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | æè¿° |
|---------|------|
| æ¦‚å¿µåˆ†æ | æ£€æµ‹ LaTeX è¡¨è¾¾å¼æˆ–åŒ¹é…é¢„ç½®æ¨¡æ¿ |
| AI ä»£ç ç”Ÿæˆ | ä½¿ç”¨ GPT-4.1-nano ç”Ÿæˆ Manim ä»£ç  |
| è§†é¢‘æ¸²æŸ“ | è°ƒç”¨ Manim æ¸²æŸ“ MP4 è§†é¢‘ |
| ç»“æœç¼“å­˜ | ç¼“å­˜ç›¸åŒæ¦‚å¿µçš„ç”Ÿæˆç»“æœ |
| çŠ¶æ€è½®è¯¢ | å‰ç«¯è½®è¯¢è·å–ç”Ÿæˆè¿›åº¦ |

---

## äºŒã€æŠ€æœ¯æ¶æ„åˆ†æ

### 2.1 å½“å‰æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬ | è¯„ä¼° |
|------|------|------|------|
| **åç«¯æ¡†æ¶** | Motia | 0.17.14-beta | âš ï¸ å°ä¼—æ¡†æ¶ï¼ŒWindows å…¼å®¹æ€§å·® |
| **è¿è¡Œæ—¶** | Node.js | >=18.0.0 | âœ… ç¨³å®š |
| **å‰ç«¯æ¡†æ¶** | React | 19.2.0 | âœ… è¾ƒæ–° |
| **æ„å»ºå·¥å…·** | Vite | 7.2.4 | âœ… ä¸»æµ |
| **æ ·å¼æ–¹æ¡ˆ** | Tailwind CSS | 3.4.19 | âœ… ä¸»æµ |
| **AI æœåŠ¡** | OpenAI API | - | âœ… ç¨³å®š |
| **æ¸²æŸ“å¼•æ“** | Manim (Python) | 0.18.0 | âœ… æ ¸å¿ƒä¾èµ– |
| **éƒ¨ç½²å¹³å°** | Zeabur | - | âœ… æ”¯æŒ Docker |

### 2.2 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ (React + Vite)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ InputFormâ”‚â†’â”‚useGenerationâ”‚â†’â”‚ResultSectionâ”‚â”‚ VideoPreview â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP API
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ (Motia äº‹ä»¶é©±åŠ¨)                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚generate  â”‚â†’â”‚CheckCacheâ”‚â†’â”‚Analyze   â”‚â†’â”‚GenerateCodeâ”‚   â”‚
â”‚  â”‚  .step.tsâ”‚  â”‚ .step.ts â”‚  â”‚Concept   â”‚  â”‚ .step.ts  â”‚   â”‚
â”‚  â”‚          â”‚  â”‚          â”‚  â”‚ .step.ts â”‚  â”‚           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                    â”‚
â”‚                          â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚Render    â”‚â†’â”‚Store     â”‚â†’â”‚JobStatus â”‚                   â”‚
â”‚  â”‚Video     â”‚  â”‚Result    â”‚  â”‚          â”‚                   â”‚
â”‚  â”‚.step.ts  â”‚  â”‚.step.ts  â”‚  â”‚          â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¸²æŸ“æœåŠ¡ (Manim + Python)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  subprocess.spawn('manim', [...])                   â”‚    â”‚
â”‚  â”‚  â†’ ç”Ÿæˆ MP4 è§†é¢‘æ–‡ä»¶                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€ä»£ç è´¨é‡è¯„ä¼°

### 3.1 ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ api/                    # API è·¯ç”± (3 files)
â”‚   â”œâ”€â”€ generate.step.ts    # POST /api/generate
â”‚   â”œâ”€â”€ job-status.step.ts  # GET /api/jobs/:jobId
â”‚   â””â”€â”€ health.step.ts      # GET /health
â”œâ”€â”€ events/                 # äº‹ä»¶å¤„ç†å™¨ (6 files)
â”‚   â”œâ”€â”€ check-cache.step.ts     # æ£€æŸ¥ç¼“å­˜
â”‚   â”œâ”€â”€ analyze-concept.step.ts # åˆ†ææ¦‚å¿µç±»å‹
â”‚   â”œâ”€â”€ generate-code.step.ts   # ç”Ÿæˆä»£ç 
â”‚   â”œâ”€â”€ render-video.step.ts    # æ¸²æŸ“è§†é¢‘
â”‚   â”œâ”€â”€ handle-cache-hit.step.ts # å¤„ç†ç¼“å­˜å‘½ä¸­
â”‚   â””â”€â”€ store-result.step.ts    # å­˜å‚¨ç»“æœ
â”œâ”€â”€ services/               # ä¸šåŠ¡æœåŠ¡ (4 files)
â”‚   â”œâ”€â”€ openai-client.ts    # OpenAI å°è£…
â”‚   â”œâ”€â”€ manim-templates.ts  # Manim æ¨¡æ¿åº“
â”‚   â”œâ”€â”€ concept-cache.ts    # ç¼“å­˜æœåŠ¡
â”‚   â””â”€â”€ job-store.ts        # ä»»åŠ¡çŠ¶æ€å­˜å‚¨
â””â”€â”€ middlewares/            # ä¸­é—´ä»¶ (2 files)
    â”œâ”€â”€ auth.middleware.ts  # API è®¤è¯
    â””â”€â”€ core.middleware.ts  # æ ¸å¿ƒä¸­é—´ä»¶
```

### 3.2 ä»£ç è§„æ¨¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| æ€»æ–‡ä»¶æ•° | çº¦ 25 |
| åç«¯ä»£ç è¡Œæ•° | ~800 |
| å‰ç«¯ä»£ç è¡Œæ•° | ~600 |
| æ¨¡æ¿ä»£ç è¡Œæ•° | ~500 |

### 3.3 æŠ€æœ¯å€º

| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | è¯´æ˜ |
|------|----------|------|
| Motia æ¡†æ¶ä¾èµ– | ğŸ”´ é«˜ | å°ä¼—æ¡†æ¶ï¼Œæ–‡æ¡£å°‘ï¼ŒWindows å…¼å®¹æ€§å·® |
| ç±»å‹å®‰å…¨é—®é¢˜ | ğŸŸ¡ ä¸­ | å¤§é‡ä½¿ç”¨ `as any` å¼ºåˆ¶ç±»å‹è½¬æ¢ |
| é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€ | ğŸŸ¡ ä¸­ | å„æ­¥éª¤é”™è¯¯å¤„ç†é€»è¾‘åˆ†æ•£ |
| æµ‹è¯•è¦†ç›–ç¼ºå¤± | ğŸ”´ é«˜ | æ— å•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯• |
| æ–‡æ¡£ç¼ºå¤± | ğŸŸ¡ ä¸­ | ä»£ç æ³¨é‡Šè¾ƒå°‘ |

---

## å››ã€å…³é”®ä¸šåŠ¡æµç¨‹

### 4.1 ç”Ÿæˆæµç¨‹ (Pipeline)

```
ç”¨æˆ·è¯·æ±‚ â†’ API æ¥æ”¶ â†’ äº‹ä»¶è§¦å‘ â†’ ç¼“å­˜æ£€æŸ¥ â†’ æ¦‚å¿µåˆ†æ â†’ 
ä»£ç ç”Ÿæˆ â†’ è§†é¢‘æ¸²æŸ“ â†’ ç»“æœå­˜å‚¨ â†’ çŠ¶æ€æ›´æ–°
```

### 4.2 äº‹ä»¶æµ

```
animation.requested
    â”‚
    â”œâ”€â”€[ç¼“å­˜å‘½ä¸­]â”€â”€â†’ cache.hit â”€â”€â†’ HandleCacheHit
    â”‚
    â””â”€â”€[ç¼“å­˜æœªå‘½ä¸­]â”€â”€â†’ cache.miss â”€â”€â†’ AnalyzeConcept
                                          â”‚
                                          â”œâ”€â”€[LaTeX]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ concept.analyzed
                                          â”œâ”€â”€[æ¨¡æ¿åŒ¹é…]â”€â”€â”€â”€â”€â”€â”€â”€â†’ concept.analyzed
                                          â””â”€â”€[AIç”Ÿæˆ]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ concept.analyzed
                                                                    â”‚
                                                                    â–¼
                                                            code.generated
                                                                    â”‚
                                                                    â–¼
                                                            video.rendered / video.failed
                                                                    â”‚
                                                                    â–¼
                                                            store-result
```

### 4.3 æ¨¡æ¿ç³»ç»Ÿ

å·²å®ç°çš„æ•°å­¦æ¨¡æ¿ï¼ˆ12ä¸ªï¼‰:

| æ¨¡æ¿åç§° | å…³é”®è¯ |
|---------|--------|
| å‹¾è‚¡å®šç† | pythagoras, right triangle, hypotenuse |
| äºŒæ¬¡å‡½æ•° | quadratic, parabola, x^2 |
| ä¸‰è§’å‡½æ•° | sine, cosine, trig, unit circle |
| 3D æ›²é¢ | 3d surface, surface plot |
| çƒä½“ | sphere, ball |
| ç«‹æ–¹ä½“ | cube, cubic |
| å¯¼æ•° | derivative, differentiation, slope |
| ç§¯åˆ† | integral, area under curve |
| çŸ©é˜µ | matrix, linear transformation |
| ç‰¹å¾å€¼ | eigenvalue, eigenvector |
| å¤æ•° | complex, imaginary |
| å¾®åˆ†æ–¹ç¨‹ | differential equation, ode |

---

## äº”ã€é‡æ„å¯è¡Œæ€§åˆ†æ

### 5.1 é‡æ„é€‰é¡¹å¯¹æ¯”

| é€‰é¡¹ | å¤æ‚åº¦ | ç»´æŠ¤æˆæœ¬ | Windows å…¼å®¹ | æ¨èåº¦ |
|------|--------|----------|--------------|--------|
| **A: ä¿æŒç°çŠ¶** | - | ä½ | âŒ | âš ï¸ ä¸æ¨è |
| **B: Motia â†’ Express** | ä¸­ | ä¸­ | âœ… | â­ æ¨è |
| **C: Motia â†’ NestJS** | é«˜ | é«˜ | âœ… | ğŸŸ¡ ä¼ä¸šçº§ |
| **D: å‰ç«¯åˆ†ç¦»éƒ¨ç½²** | ä½ | ä½ | âœ… | â­ æ¨è |
| **E: å…¨æ ˆ Next.js** | é«˜ | ä¸­ | âœ… | ğŸŸ¡ æ¿€è¿› |

### 5.2 æ¨èæ–¹æ¡ˆ (B + D ç»„åˆ)

#### æ–¹æ¡ˆ B: åç«¯è¿ç§»åˆ° Express

**æ ¸å¿ƒæ”¹åŠ¨**:

| åŸ Motia æ¦‚å¿µ | Express æ›¿ä»£æ–¹æ¡ˆ |
|--------------|-----------------|
| `ApiRouteConfig` | Express Router |
| `EventConfig` | å†…éƒ¨å‡½æ•°è°ƒç”¨ / Queue |
| `emits()` | ç›´æ¥è°ƒç”¨ä¸‹ä¸€é˜¶æ®µ |
| `subscribes` | é¡ºåºæ‰§è¡Œ |
| `state` | Redis / å†…å­˜ Map |
| `middleware` | Express Middleware |

**é¢„ä¼°æ”¹åŠ¨é‡**: ~30% ä»£ç é‡å†™

**ä¼˜åŠ¿**:
- Windows å®Œå…¨å…¼å®¹
- ç¤¾åŒºèµ„æºä¸°å¯Œ
- éƒ¨ç½²ç®€å•

#### æ–¹æ¡ˆ D: å‰ç«¯ç‹¬ç«‹éƒ¨ç½²

**æ–¹å¼**:
- å‰ç«¯ â†’ Vercel / Cloudflare Pages
- åç«¯ â†’ Zeabur / Railway

**ä¼˜åŠ¿**:
- å¼€å‘æ—¶å¯ä»¥åˆ†å¼€è·‘
- éƒ¨ç½²æ›´çµæ´»
- å‰ç«¯çƒ­æ›´æ–°æ›´å¿«

---

## å…­ã€ä¾èµ–åˆ†æ

### 6.1 åç«¯ä¾èµ–

```json
{
  "express": "^4.18.0",        // âœ… ç¨³å®š
  "motia": "0.17.14-beta.196", // âš ï¸ ç§»é™¤ç›®æ ‡
  "openai": "^4.50.0",         // âœ… ä¿ç•™
  "uuid": "^10.0.0",           // âœ… ä¿ç•™
  "zod": "^3.23.0"             // âœ… ä¿ç•™ (è¡¨å•éªŒè¯)
}
```

### 6.2 å‰ç«¯ä¾èµ–

```json
{
  "react": "^19.2.0",          // âœ… ä¿ç•™
  "react-dom": "^19.2.0",      // âœ… ä¿ç•™
  "vite": "^7.2.4",            // âœ… ä¿ç•™
  "tailwindcss": "^3.4.19",    // âœ… ä¿ç•™
  "react-syntax-highlighter": "^16.1.0"  // âœ… ä»£ç å±•ç¤º
}
```

### 6.3 å¤–éƒ¨æœåŠ¡ä¾èµ–

| æœåŠ¡ | ç”¨é€” | å¿…éœ€æ€§ |
|------|------|--------|
| OpenAI API | AI ä»£ç ç”Ÿæˆ | å¯é€‰ (æœ‰æ¨¡æ¿ fallback) |
| Redis | çŠ¶æ€å­˜å‚¨ | å¯é€‰ (å¼€å‘ç¯å¢ƒç”¨å†…å­˜) |
| Manim (Python) | è§†é¢‘æ¸²æŸ“ | **å¿…éœ€** (æ ¸å¿ƒ) |

---

## ä¸ƒã€éƒ¨ç½²ç°çŠ¶

### 7.1 Zeabur é…ç½®

```json
{
  "cpu": "2",
  "memory": "4Gi",
  "disk": "10Gi"
}
```

### 7.2 Docker æ¶æ„

Docker åœ¨æœ¬é¡¹ç›®ä¸­çš„ä½œç”¨:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Docker Container                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node.js (Motia åç«¯)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Python 3.11 + Manim + LaTeX       â”‚  â”‚  â† Docker ä¸»è¦ä¸ºè¿™å±‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Xvfb (è™šæ‹Ÿæ˜¾ç¤º)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®å‘ç°**: Docker ä¸»è¦ç”¨äº Manim æ¸²æŸ“ç¯å¢ƒï¼Œä¸æ˜¯åç«¯æœåŠ¡ã€‚

---

## å…«ã€é£é™©è¯„ä¼°

### 8.1 é‡æ„é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| æ¸²æŸ“æœåŠ¡å¤±æ•ˆ | ä½ | é«˜ | ä¿ç•™ Dockerfile |
| API å…¼å®¹æ€§é—®é¢˜ | ä¸­ | ä¸­ | ç‰ˆæœ¬åŒ– API |
| åŠŸèƒ½å›å½’ | ä¸­ | ä¸­ | ç¼–å†™é›†æˆæµ‹è¯• |

### 8.2 ä¸é‡æ„é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ |
|------|------|------|
| Windows å¼€å‘å›°éš¾ | é«˜ | é«˜ |
| æ¡†æ¶åœæ­¢ç»´æŠ¤ | ä¸­ | é«˜ |
| éš¾ä»¥æ‹›è˜ç»´æŠ¤è€… | ä¸­ | ä¸­ |

---

## ä¹ã€ä¾¦å¯Ÿç»“è®º

### 9.1 æ€»ä½“è¯„ä¼°

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| ä»£ç è´¨é‡ | 7/10 | ç»“æ„æ¸…æ™°ï¼Œä½†æµ‹è¯•ç¼ºå¤± |
| æ¶æ„åˆç†æ€§ | 6/10 | Motia é™åˆ¶äº†å¯ç»´æŠ¤æ€§ |
| å¯ç§»æ¤æ€§ | 4/10 | å¼ºä¾èµ– Motia |
| Windows å…¼å®¹ | 2/10 | åŸºæœ¬æ— æ³•æœ¬åœ°å¼€å‘ |

### 9.2 å»ºè®®è¡ŒåŠ¨

#### çŸ­æœŸ (ç«‹å³æ‰§è¡Œ)

1. âœ… **æ·»åŠ åŸºç¡€æµ‹è¯•** - Jest + Supertest
2. âœ… **æ–‡æ¡£åŒ– API** - OpenAPI/Swagger
3. âœ… **æå–æ¸²æŸ“æœåŠ¡** - Docker ç‹¬ç«‹éƒ¨ç½²

#### ä¸­æœŸ (1-2 å‘¨)

1. â­ **åç«¯è¿ç§»åˆ° Express** - è§£å†³ Windows å¼€å‘é—®é¢˜
2. â­ **å‰ç«¯ç‹¬ç«‹éƒ¨ç½²** - Vercel + åç«¯åˆ†ç¦»
3. âœ… **æ·»åŠ  CI/CD** - GitHub Actions

#### é•¿æœŸ (1 ä¸ªæœˆ)

1. ğŸŸ¡ **è€ƒè™‘ NestJS** - å¦‚æœé¡¹ç›®å˜å¤§
2. ğŸŸ¡ **Serverless æ¸²æŸ“** - Cloudflare Workers + Manim
3. ğŸŸ¡ **å¤šæ¨¡æ¿æ‰©å±•** - ç¤¾åŒºè´¡çŒ®æ¨¡æ¿

### 9.3 ä¼˜å…ˆçº§æ’åº

| ä¼˜å…ˆçº§ | è¡ŒåŠ¨é¡¹ | é¢„æœŸæ”¶ç›Š |
|--------|--------|----------|
| P0 | åç«¯è¿ç§» Express | Windows å¼€å‘å¯è¡Œ |
| P0 | å‰ç«¯åˆ†ç¦»éƒ¨ç½² | å¼€å‘æ•ˆç‡æå‡ |
| P1 | æ·»åŠ å•å…ƒæµ‹è¯• | ä»£ç è´¨é‡ä¿éšœ |
| P1 | CI/CD æµæ°´çº¿ | éƒ¨ç½²è‡ªåŠ¨åŒ– |
| P2 | æ–‡æ¡£å®Œå–„ | é™ä½ç»´æŠ¤é—¨æ§› |

---

## é™„å½•

### A. å…³é”®æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | åŠŸèƒ½ |
|---------|------|
| `src/api/generate.step.ts` | ç”Ÿæˆå…¥å£ |
| `src/events/render-video.step.ts` | è§†é¢‘æ¸²æŸ“æ ¸å¿ƒ |
| `src/services/manim-templates.ts` | 12 ä¸ªé¢„ç½®æ¨¡æ¿ |
| `src/services/openai-client.ts` | OpenAI å°è£… |
| `frontend/src/hooks/useGeneration.ts` | å‰ç«¯çŠ¶æ€ç®¡ç† |

### B. ç¯å¢ƒå˜é‡

| å˜é‡ | å¿…å¡« | é»˜è®¤å€¼ | ç”¨é€” |
|------|------|--------|------|
| `OPENAI_API_KEY` | å¦ | - | AI ä»£ç ç”Ÿæˆ |
| `OPENAI_MODEL` | å¦ | gpt-4.1-nano | AI æ¨¡å‹é€‰æ‹© |
| `REDIS_URL` | å¦ | redis://localhost:6379 | çŠ¶æ€å­˜å‚¨ |
| `NODE_ENV` | å¦ | development | ç¯å¢ƒæ ‡è¯† |

### C. ç«¯å£æš´éœ²

| ç«¯å£ | æœåŠ¡ | è¯´æ˜ |
|------|------|------|
| 3000 | åç«¯ API | ä¸»æœåŠ¡ç«¯å£ |
| 6379 | Redis | å¼€å‘å¯é€‰ |

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-01-19*  
*ä¾¦å¯Ÿå‘˜: iFlow CLI*
