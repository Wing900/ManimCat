# ManimCat HuggingFace Spaces 环境变量配置
# 在 HuggingFace Space Settings → Variables and secrets 中配置这些变量

# ==================== 必需配置 ====================

# OpenAI API Key (必需)
# 用于 AI 代码生成，支持 OpenAI 或兼容的 API
OPENAI_API_KEY=your-openai-api-key-here

# ==================== 可选配置 ====================

# OpenAI 模型 (可选，默认 glm-4-flash)
# 推荐模型:
# - glm-4-flash (智谱 AI，快速且便宜)
# - gpt-4o-mini (OpenAI，轻量级)
# - gpt-4-turbo (OpenAI，高性能)
OPENAI_MODEL=glm-4-flash

# 自定义 API 端点 (可选)
# 留空使用 OpenAI 官方 API
# 示例:
# - 智谱 AI: https://open.bigmodel.cn/api/paas/v4
# - Together AI: https://api.together.xyz/v1
# - LocalAI: http://localhost:8080/v1
CUSTOM_API_URL=

# ManimCat API 认证密钥 (可选但强烈推荐)
# 设置后，所有 API 请求需在 Header 中包含: x-api-key: YOUR_KEY
# 留空则跳过认证 (仅推荐测试环境)
MANIMCAT_API_KEY=

# ==================== 系统配置 ====================

# Node 环境 (固定为 production)
NODE_ENV=production

# 端口 (HuggingFace Spaces 必须是 7860)
PORT=7860

# Redis 配置 (使用内置 Redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_MAXMEMORY=256mb

# ==================== AI 配置 ====================

# AI 温度 (控制输出随机性，0-2)
AI_TEMPERATURE=0.7

# AI 最大 Token 数
AI_MAX_TOKENS=1200

# OpenAI 请求超时 (毫秒)
OPENAI_TIMEOUT=60000

# ==================== 缓存配置 ====================

# 启用概念缓存 (避免重复生成相同内容)
ENABLE_CACHING=true

# 缓存过期时间 (秒，默认 30 天)
CACHE_TTL=2592000

# ==================== 任务队列配置 ====================

# Bull 队列并发数 (根据硬件配置调整)
# - CPU basic: 1-2
# - CPU upgrade: 2-4
# - GPU: 4-8
WORKERS=2

# 任务超时配置 (毫秒)
REQUEST_TIMEOUT=30000   # 请求超时 30 秒
JOB_TIMEOUT=600000      # 任务超时 10 分钟
MANIM_TIMEOUT=300000    # Manim 渲染超时 5 分钟

# ==================== 文件系统配置 ====================

# 视频输出目录
VIDEO_OUTPUT_DIR=public/videos

# 临时文件目录
TEMP_DIR=tmp

# ==================== CORS 配置 ====================

# CORS 允许的来源 (生产环境应设置具体域名)
CORS_ORIGIN=*

# ==================== 日志配置 ====================

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info

# ==================== 显示配置 ====================

# Xvfb 显示编号
DISPLAY=:99

# Matplotlib 后端
MPLBACKEND=Agg

# ==================== HuggingFace Spaces 特定配置 ====================

# Space 名称 (可选，用于日志)
SPACE_NAME=

# Space 作者 (可选，用于日志)
SPACE_AUTHOR=

# 注意事项:
# 1. 所有敏感信息 (API Key) 必须在 HF Space Settings 中配置，不要提交到代码仓库
# 2. PORT 必须是 7860，这是 HF Spaces 的固定端口
# 3. Redis 使用内置实例，REDIS_HOST 必须是 localhost
# 4. 根据 HF Space 的硬件配置调整 WORKERS 和超时时间
# 5. 启用 MANIMCAT_API_KEY 以保护您的服务免受滥用